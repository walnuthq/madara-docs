"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9817],{7531:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"quickstart/devnet","title":"Quickstart: Run transactions on a devnet","description":"Overview","source":"@site/docs/quickstart/devnet.md","sourceDirName":"quickstart","slug":"/quickstart/devnet","permalink":"/madara-docs/quickstart/devnet","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"defaultSidebar","previous":{"title":"Quickstart tutorials","permalink":"/madara-docs/category/quickstart-tutorials"},"next":{"title":"Chain operators","permalink":"/madara-docs/category/chain-operators"}}');var r=n(4848),s=n(8453);const c={sidebar_position:1},i="Quickstart: Run transactions on a devnet",l={},o=[{value:"Overview",id:"overview",level:2},{value:"Installation",id:"installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Install Madara CLI",id:"install-madara-cli",level:3},{value:"Install specific tooling",id:"install-specific-tooling",level:3},{value:"Run a devnet chain with Madara CLI",id:"run-a-devnet-chain-with-madara-cli",level:2},{value:"Configure",id:"configure",level:2},{value:"Values to be replaced",id:"values-to-be-replaced",level:3},{value:"Initiate a Scarb project",id:"initiate-a-scarb-project",level:3},{value:"Configure your account and signer",id:"configure-your-account-and-signer",level:3},{value:"Deploy a contract",id:"deploy-a-contract",level:2},{value:"Save an example contract locally",id:"save-an-example-contract-locally",level:3},{value:"Compile the example contract",id:"compile-the-example-contract",level:3},{value:"Contract interaction",id:"contract-interaction",level:2},{value:"Deploy the contract",id:"deploy-the-contract",level:3},{value:"Declare your contract",id:"declare-your-contract",level:4},{value:"Deploy it",id:"deploy-it",level:4},{value:"Issue transactions",id:"issue-transactions",level:3}];function d(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"quickstart-run-transactions-on-a-devnet",children:"Quickstart: Run transactions on a devnet"})}),"\n",(0,r.jsx)(a.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(a.p,{children:"This quick-start guide helps you start your own, local chain with Madara. Furthermore, it instructs you to deploy a contract and run transactions on the chain to verify its functionality."}),"\n",(0,r.jsx)(a.p,{children:"The used chain is only available locally and is meant for testing purposes."}),"\n",(0,r.jsx)(a.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsxs)(a.p,{children:["These installation instructions assume you are using Linux or macOS. For Windows, please utilize ",(0,r.jsx)(a.a,{href:"https://learn.microsoft.com/en-us/windows/wsl/",children:"WSL2"}),"."]}),"\n",(0,r.jsx)(a.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(a.p,{children:"You will need to have the following system components installed:"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["Rust. Please see ",(0,r.jsx)(a.a,{href:"https://www.rust-lang.org/tools/install",children:"here"})," for instructions."]}),"\n",(0,r.jsxs)(a.li,{children:["Docker. Please see ",(0,r.jsx)(a.a,{href:"https://docs.docker.com/engine/install/",children:"here"})," for instructions. Remember to install also ",(0,r.jsx)(a.code,{children:"docker-compose"}),"."]}),"\n"]}),"\n",(0,r.jsx)(a.h3,{id:"install-madara-cli",children:"Install Madara CLI"}),"\n",(0,r.jsx)(a.p,{children:"You should start by installing the main tool for running Madara, the Madara CLI:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"git clone https://github.com/madara-alliance/madara-cli.git\ncd madara-cli\ngit submodule update --init --recursive --jobs=4 --remote\n"})}),"\n",(0,r.jsx)(a.p,{children:"The above will clone the repository into a new folder, enter the folder and initialize the repository's Git submodules."}),"\n",(0,r.jsx)(a.h3,{id:"install-specific-tooling",children:"Install specific tooling"}),"\n",(0,r.jsx)(a.p,{children:"Then continue with the specific tooling used in this tutorial (and in others):"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"curl https://get.starkli.sh | sh\ncurl --proto '=https' --tlsv1.2 -sSf https://docs.swmansion.com/scarb/install.sh | sh\n"})}),"\n",(0,r.jsxs)(a.p,{children:["The above will install ",(0,r.jsx)(a.a,{href:"https://book.starkli.rs",children:"Starkli"})," CLI and ",(0,r.jsx)(a.a,{href:"https://docs.swmansion.com/scarb/",children:"Scarb"})," CLI."]}),"\n",(0,r.jsx)(a.p,{children:"Now restart your terminal and finish the installation with:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"starkliup\n"})}),"\n",(0,r.jsx)(a.h2,{id:"run-a-devnet-chain-with-madara-cli",children:"Run a devnet chain with Madara CLI"}),"\n",(0,r.jsx)(a.p,{children:"You are now ready to run your own local Madara chain. If you're not in the Madara CLI's folder, go there and run:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"cargo run create\n"})}),"\n",(0,r.jsx)(a.p,{children:"The above will prompt you for various options. You should choose the following:"}),"\n",(0,r.jsxs)(a.ol,{children:["\n",(0,r.jsxs)(a.li,{children:["Select Madara mode: ",(0,r.jsx)(a.code,{children:"Devnet"})]}),"\n",(0,r.jsx)(a.li,{children:"Input DB path: keep the default"}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"It may take half an hour to prepare the image for the first time. Once the devnet is ready, leave it running and open a new terminal for the rest of this guide."}),"\n",(0,r.jsx)(a.h2,{id:"configure",children:"Configure"}),"\n",(0,r.jsx)(a.h3,{id:"values-to-be-replaced",children:"Values to be replaced"}),"\n",(0,r.jsx)(a.p,{children:"The rest of these instructions may require you to replace some of the values in the commands in the following way:"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["Value ",(0,r.jsx)(a.code,{children:"0x0410c6eadd73918ea90b6658d24f5f2c828e39773819c1443d8602a3c72344c2"})," is used as a private key. You may choose whicheven private key from the list of keys given upon launching the devnet"]}),"\n",(0,r.jsxs)(a.li,{children:["Value ",(0,r.jsx)(a.code,{children:"0x07484e8e3af210b2ead47fa08c96f8d18b616169b350a8b75fe0dc4d2e01d493"})," is used as your public account contract address. Make sure this corresponds to the chosen private key."]}),"\n",(0,r.jsxs)(a.li,{children:["Value ",(0,r.jsx)(a.code,{children:"0x043539387d5f6359716da16fbff9c1536b54c1f5928fbc4a1ea7ea71414d02ab"})," is used as the contract's class hash value. Use the one given upon declaring the contract."]}),"\n",(0,r.jsxs)(a.li,{children:["Value ",(0,r.jsx)(a.code,{children:"0x07197883a42e89ae1a057e2bc3953508558d1864b7700556f897d3520e81db24"})," is used as the contract's address. Use the one given upon deploying the contract."]}),"\n"]}),"\n",(0,r.jsx)(a.h3,{id:"initiate-a-scarb-project",children:"Initiate a Scarb project"}),"\n",(0,r.jsx)(a.p,{children:"You should instantiate a new Scarb project in a new folder:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"mkdir madara-quickstart\ncd madara-quickstart\nscarb init --no-vcs --test-runner cairo-test\n"})}),"\n",(0,r.jsx)(a.h3,{id:"configure-your-account-and-signer",children:"Configure your account and signer"}),"\n",(0,r.jsx)(a.p,{children:"Before you can interact with the network you need an account. Luckily, running the devnet gives you a few ready accounts and their respective private keys. This is only possible because the network is a fresh network and you have full control over it - in real networks you need to get an account by different means."}),"\n",(0,r.jsx)(a.p,{children:"However, you still need to store the account in a format understood by Starkli."}),"\n",(0,r.jsx)(a.p,{children:"Choose an account from the list displayed upon running the devnet. Store it with:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"starkli account fetch --rpc http://localhost:9944 --output ./account 0x07484e8e3af210b2ead47fa08c96f8d18b616169b350a8b75fe0dc4d2e01d493\n"})}),"\n",(0,r.jsx)(a.h2,{id:"deploy-a-contract",children:"Deploy a contract"}),"\n",(0,r.jsx)(a.h3,{id:"save-an-example-contract-locally",children:"Save an example contract locally"}),"\n",(0,r.jsxs)(a.p,{children:["We will use a very simple balance contract as an example. Replace the contents of ",(0,r.jsx)(a.code,{children:"src/lib.cairo"})," with:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-rust",children:"#[starknet::interface]\ntrait IBalance<T> {\n    // Returns the current balance.\n    fn get(self: @T) -> u128;\n    // Increases the balance by the given amount.\n    fn increase(ref self: T, a: u128);\n}\n\n#[starknet::contract]\nmod Balance {\n    use traits::Into;\n\n    #[storage]\n    struct Storage {\n        value: u128, \n    }\n\n    #[constructor]\n    fn constructor(ref self: ContractState) {\n        self.value.write(5);\n    }\n\n    #[abi(embed_v0)]\n    impl Balance of super::IBalance<ContractState> {\n        fn get(self: @ContractState) -> u128 {\n            self.value.read()\n        }\n        fn increase(ref self: ContractState, a: u128)  {\n            self.value.write( self.value.read() + a );\n        }\n    }\n}\n"})}),"\n",(0,r.jsxs)(a.p,{children:["Next, replace the contents of ",(0,r.jsx)(a.code,{children:"Scarb.toml"})," with:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-rust",children:'[package]\nname = "madara_example"\nversion = "0.1.0"\n\n[dependencies]\nstarknet = "=2.9.2"\n\n[[target.starknet-contract]]\n'})}),"\n",(0,r.jsx)(a.h3,{id:"compile-the-example-contract",children:"Compile the example contract"}),"\n",(0,r.jsx)(a.p,{children:"Compile the contract with:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"scarb build\n"})}),"\n",(0,r.jsx)(a.h2,{id:"contract-interaction",children:"Contract interaction"}),"\n",(0,r.jsx)(a.p,{children:"We are now ready to start deploying our contract and interacting with it."}),"\n",(0,r.jsx)(a.h3,{id:"deploy-the-contract",children:"Deploy the contract"}),"\n",(0,r.jsx)(a.h4,{id:"declare-your-contract",children:"Declare your contract"}),"\n",(0,r.jsx)(a.p,{children:"Before deployment, the contract needs to be declared to the network. Declare it with:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"starkli declare --rpc http://localhost:9944 --private-key 0x0410c6eadd73918ea90b6658d24f5f2c828e39773819c1443d8602a3c72344c2 --compiler-version 2.9.1  --account account ./target/dev/madara_example_Balance.contract_class.json\n"})}),"\n",(0,r.jsx)(a.p,{children:"Note the resulting class hash."}),"\n",(0,r.jsx)(a.h4,{id:"deploy-it",children:"Deploy it"}),"\n",(0,r.jsx)(a.p,{children:"You are now ready to deploy the contract. Deploy with:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"starkli deploy 0x043539387d5f6359716da16fbff9c1536b54c1f5928fbc4a1ea7ea71414d02ab --rpc http://localhost:9944 --private-key 0x0410c6eadd73918ea90b6658d24f5f2c828e39773819c1443d8602a3c72344c2 --account account\n"})}),"\n",(0,r.jsx)(a.p,{children:"Note the resulting contract address."}),"\n",(0,r.jsx)(a.h3,{id:"issue-transactions",children:"Issue transactions"}),"\n",(0,r.jsx)(a.p,{children:"The contract keeps track of an imaginary balance. Let's first query the initial balance:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"starkli call --rpc http://localhost:9944 0x07197883a42e89ae1a057e2bc3953508558d1864b7700556f897d3520e81db24 get\n"})}),"\n",(0,r.jsxs)(a.p,{children:["You should see value ",(0,r.jsx)(a.code,{children:"5"})," as the initial value (prefixed by a lot of zeros)."]}),"\n",(0,r.jsx)(a.p,{children:"Let's try to increase this value by a transaction. Run:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"starkli invoke --account account --rpc http://localhost:9944 --private-key 0x0410c6eadd73918ea90b6658d24f5f2c828e39773819c1443d8602a3c72344c2  0x07197883a42e89ae1a057e2bc3953508558d1864b7700556f897d3520e81db24 increase 3\n"})}),"\n",(0,r.jsxs)(a.p,{children:["If you now query the balance again, you should see value ",(0,r.jsx)(a.code,{children:"8"}),". Congratulations, you have successfully modified the contract's state!"]})]})}function h(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);