"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[609],{748:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"tutorials/quickstart_chain","title":"Quickstart: start your own chain","description":"Overview","source":"@site/docs/tutorials/quickstart_chain.md","sourceDirName":"tutorials","slug":"/tutorials/quickstart_chain","permalink":"/madara-docs/tutorials/quickstart_chain","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"defaultSidebar","previous":{"title":"Tutorials","permalink":"/madara-docs/category/tutorials"}}');var r=t(4848),s=t(8453);const l={sidebar_position:1},i="Quickstart: start your own chain",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Installation",id:"installation",level:2},{value:"Option 1: Build from source",id:"option-1-build-from-source",level:3},{value:"Option 2: Install with Docker",id:"option-2-install-with-docker",level:3},{value:"Start the chain",id:"start-the-chain",level:2},{value:"If built from source",id:"if-built-from-source",level:3},{value:"If using Docker",id:"if-using-docker",level:3},{value:"Restart",id:"restart",level:4},{value:"Install tooling for Starknet interaction",id:"install-tooling-for-starknet-interaction",level:2},{value:"Install Starkli",id:"install-starkli",level:3},{value:"Configure your account and signer",id:"configure-your-account-and-signer",level:3},{value:"Install and configure Scarb",id:"install-and-configure-scarb",level:3},{value:"Save an example contract locally",id:"save-an-example-contract-locally",level:3},{value:"Compile the example contract",id:"compile-the-example-contract",level:3},{value:"Deploy the contract",id:"deploy-the-contract",level:2},{value:"Declare your contract",id:"declare-your-contract",level:3},{value:"Deploy it",id:"deploy-it",level:3},{value:"Issue transactions",id:"issue-transactions",level:2},{value:"Next steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"quickstart-start-your-own-chain",children:"Quickstart: start your own chain"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This quick-start guide helps you start your own, local chain with Madara. Furthermore, it instructs you to run some actual transactions on the chain to verify its functionality."}),"\n",(0,r.jsx)(n.p,{children:"The used chain is only available locally and is meant for testing purposes."}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsxs)(n.p,{children:["These installation instructions assume you are using a Linux or macOS. For Windows, please utilize ",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/windows/wsl/",children:"WSL2"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"There are two ways to install Madara:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Build from source"}),"\n",(0,r.jsx)(n.li,{children:"With Docker"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Please choose the one that fits you best."}),"\n",(0,r.jsx)(n.h3,{id:"option-1-build-from-source",children:"Option 1: Build from source"}),"\n",(0,r.jsx)(n.p,{children:"First, make sure you have all the required dependencies installed:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Dependency"}),(0,r.jsx)(n.th,{children:"Minimum version"}),(0,r.jsx)(n.th,{children:"Installation"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Rust"}),(0,r.jsx)(n.td,{children:"rustc 1.81"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Clang"}),(0,r.jsx)(n.td,{children:"Latest"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sudo apt-get install clang"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Openssl"}),(0,r.jsx)(n.td,{children:"0.10"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sudo apt install openssl"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Next, clone the repository:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/madara-alliance/madara\ncd madara\n"})}),"\n",(0,r.jsx)(n.p,{children:"Then you are ready to build the project. This will take some minutes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo build\n"})}),"\n",(0,r.jsx)(n.h3,{id:"option-2-install-with-docker",children:"Option 2: Install with Docker"}),"\n",(0,r.jsx)(n.p,{children:"Download the required Docker images."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker pull ghcr.io/madara-alliance/madara:latest\ndocker tag ghcr.io/madara-alliance/madara:latest madara:latest\ndocker rmi ghcr.io/madara-alliance/madara:latest\n"})}),"\n",(0,r.jsx)(n.h2,{id:"start-the-chain",children:"Start the chain"}),"\n",(0,r.jsx)(n.h3,{id:"if-built-from-source",children:"If built from source"}),"\n",(0,r.jsx)(n.p,{children:"Run a local devnet with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo run -- --name Madara --devnet --base-path ../madara_db --chain-config-override=chain_id=abcabc\n"})}),"\n",(0,r.jsx)(n.p,{children:"Notes about the parameters:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["All data is stored in a new database folder denoted by ",(0,r.jsx)(n.code,{children:"base-path"})," parameter. Use a suitable location."]}),"\n",(0,r.jsxs)(n.li,{children:["It is important to NOT use a chain ID that's being utilized by some ",(0,r.jsx)(n.a,{href:"https://github.com/starknet-io/starknet.js/blob/8fb2193462b5bb743f551cdec631d5923f09e657/src/constants.ts#L44",children:"existing Starknet network"}),". Otherwise you are free to use any hexadecimal ID you want."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Leave the devnet running in one terminal window and open another one for interaction."}),"\n",(0,r.jsx)(n.h3,{id:"if-using-docker",children:"If using Docker"}),"\n",(0,r.jsx)(n.p,{children:"Run Madara with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker run -p 9944:9944  --name Madara madara:latest --devnet --rpc-external\n"})}),"\n",(0,r.jsx)(n.p,{children:"To make sure that Madara is running correctly, you can check its logs with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker logs -f -n 100 Madara\n"})}),"\n",(0,r.jsx)(n.h4,{id:"restart",children:"Restart"}),"\n",(0,r.jsx)(n.p,{children:"If you need to restart Madara, you should first remove its Docker container with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker rm -f Madara\n"})}),"\n",(0,r.jsx)(n.h2,{id:"install-tooling-for-starknet-interaction",children:"Install tooling for Starknet interaction"}),"\n",(0,r.jsxs)(n.p,{children:["To deploy and interact with Starknet smart contracts we're going to use ",(0,r.jsx)(n.a,{href:"https://book.starkli.rs/",children:"Starkli"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"install-starkli",children:"Install Starkli"}),"\n",(0,r.jsx)(n.p,{children:"Install a Starkli manager with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl https://get.starkli.sh | sh\n"})}),"\n",(0,r.jsx)(n.p,{children:"Restart your terminal. After that, you can install Starkli with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"starkliup\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configure-your-account-and-signer",children:"Configure your account and signer"}),"\n",(0,r.jsx)(n.p,{children:"Before you can interact with the network you need an account. Luckily, running the devnet gives you a few ready accounts and their respective private keys. This is only possible because the network is a fresh network and you have full control over it - in real networks you need to get an account by different means."}),"\n",(0,r.jsx)(n.p,{children:"However, you still need to store the account in a format understood by Starkli. You can do this by (replace the address with one you chose from the list):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"starkli account fetch --rpc http://localhost:9944 --output ./account 0x07484e8e3af210b2ead47fa08c96f8d18b616169b350a8b75fe0dc4d2e01d493\n"})}),"\n",(0,r.jsx)(n.h3,{id:"install-and-configure-scarb",children:"Install and configure Scarb"}),"\n",(0,r.jsxs)(n.p,{children:["We will utilize (Scarb)[",(0,r.jsx)(n.a,{href:"https://docs.swmansion.com/scarb/docs",children:"https://docs.swmansion.com/scarb/docs"}),"]"," to compile our contract code. You can install Scarb with:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"curl --proto '=https' --tlsv1.2 -sSf https://docs.swmansion.com/scarb/install.sh | sh\n"})}),"\n",(0,r.jsx)(n.p,{children:"Next you should instantiate a new Scarb project. You can do this with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"scarb init --no-vcs --test-runner cairo-test\n"})}),"\n",(0,r.jsx)(n.h3,{id:"save-an-example-contract-locally",children:"Save an example contract locally"}),"\n",(0,r.jsxs)(n.p,{children:["We will use a very simple counter contract as an example. Replace the contents of ",(0,r.jsx)(n.code,{children:"src/lib.cairo"})," with:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"#[starknet::interface]\ntrait IBalance<T> {\n    // Returns the current balance.\n    fn get(self: @T) -> u128;\n    // Increases the balance by the given amount.\n    fn increase(ref self: T, a: u128);\n}\n\n#[starknet::contract]\nmod Balance {\n    use traits::Into;\n\n    #[storage]\n    struct Storage {\n        value: u128, \n    }\n\n    #[constructor]\n    fn constructor(ref self: ContractState, value_: u128) {\n        self.value.write(value_);\n    }\n\n    #[abi(embed_v0)]\n    impl Balance of super::IBalance<ContractState> {\n        fn get(self: @ContractState) -> u128 {\n            self.value.read()\n        }\n        fn increase(ref self: ContractState, a: u128)  {\n            self.value.write( self.value.read() + a );\n        }\n    }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Next, replace the contents of ",(0,r.jsx)(n.code,{children:"Scarb.toml"})," with:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'[package]\nname = "madara_example"\nversion = "0.1.0"\n\n[dependencies]\nstarknet = "=2.9.2"\n\n[[target.starknet-contract]]\n'})}),"\n",(0,r.jsx)(n.p,{children:"TODO: document to fix the version to one we have installed"}),"\n",(0,r.jsx)(n.h3,{id:"compile-the-example-contract",children:"Compile the example contract"}),"\n",(0,r.jsx)(n.p,{children:"Compile the contract"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"scarb build\n"})}),"\n",(0,r.jsx)(n.h2,{id:"deploy-the-contract",children:"Deploy the contract"}),"\n",(0,r.jsx)(n.h3,{id:"declare-your-contract",children:"Declare your contract"}),"\n",(0,r.jsx)(n.p,{children:"Before deployment, the contract needs to be declared to the network. Declare it with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"starkli declare --rpc http://localhost:9944 --private-key 0x0410c6eadd73918ea90b6658d24f5f2c828e39773819c1443d8602a3c72344c2 --compiler-version 2.9.1  --account account ./target/dev/madara_example_SimpleStorage.contract_class.json\n"})}),"\n",(0,r.jsx)(n.h3,{id:"deploy-it",children:"Deploy it"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use Starkli or Scarb for deployment"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"issue-transactions",children:"Issue transactions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Remember to use your private key"}),"\n",(0,r.jsx)(n.li,{children:"..."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,r.jsx)(n.p,{children:"TODO"})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>i});var a=t(6540);const r={},s=a.createContext(r);function l(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);